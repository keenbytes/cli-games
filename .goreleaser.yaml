# yaml-language-server: $schema=https://goreleaser.com/static/schema.json
# vim: set ts=2 sw=2 tw=0 fo=cnqoj

version: 2

before:
  hooks:
    - go mod tidy

builds:
  - env:
      - CGO_ENABLED=0
    goos:
      - linux
      - windows
      - darwin
    goarch:
      - amd64
      - arm64
    main: ./cmd/lettersnake
    binary: lettersnake
    id: lettersnake
  - env:
      - CGO_ENABLED=0
    goos:
      - linux
      - windows
      - darwin
    goarch:
      - amd64
      - arm64
    main: ./cmd/ortotris
    binary: ortotris
    id: ortotris

checksum:
  name_template: 'checksums.txt'

snapshot:
  version_template: "{{ incpatch .Version }}-next"

archives:
  - formats: [ 'zip' ]
    files:
      - LICENSE
    id: ortotris
    name_template: {{ .Binary }}_{{ .Version }}_{{ .Os }}_{{ .Arch }}{{ with .Arm }}v{{ . }}{{ end }}{{ with .Mips }}_{{ . }}{{ end }}{{ if not (eq .Amd64 "v1") }}{{ .Amd64 }}{{ end }}
  - formats: [ 'zip' ]
    files:
      - LICENSE
    id: lettersnake
    name_template: {{ .Binary }}_{{ .Version }}_{{ .Os }}_{{ .Arch }}{{ with .Arm }}v{{ . }}{{ end }}{{ with .Mips }}_{{ . }}{{ end }}{{ if not (eq .Amd64 "v1") }}{{ .Amd64 }}{{ end }}

changelog:
  sort: asc
  filters:
    exclude:
      - "^docs:"
      - "^test:"

#signs:
#  - id: archive-keyless
#    cmd: cosign
#    artifacts: archive
#    signature: ${artifact}.sigstore
#    output: false
#    args:
#      - "sign-blob"
#      - "--bundle=${signature}"
#      - "${artifact}"
#      - "-y"

